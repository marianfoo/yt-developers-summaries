oh
good good morning good morning good
afternoon good evening welcome to H on
sap Dev with me DJ kakro another episode
of our exciting series Back to Basics
with cap no. JS welcome everybody
chanaka welcome good morning thanks for
the question was a good always always
good questions from everybody here uh
and this one was particularly
interesting in that um chakia you
brought up a really good point about the
uh hexagonal
architecture um upon which a lot of the
uh
design of cap the cap framework is based
um it show I mean it shows to me you
know a very a very
experienced uh set of principles uh that
that cap sits upon uh from the original
designer and all the team uh it&amp;#39;s pretty
cool pretty cool good morning cier and
ready for some hands on SCP hands on
session Barcelona is getting hot but
they will not stop me to learn more from
DJ Adams well actually uh jaier uh uh
over here in the northwest of England
it&amp;#39;s very cold and that&amp;#39;s why I&amp;#39;ve got
this um uh top on this extra top it&amp;#39;s
been raining and cloudy and raining and
thunder and lightning it&amp;#39;s just
ridiculous and I&amp;#39;m getting no solar so I
had to actually run the engine um on my
narrow booat uh yesterday for about an
hour to to put some put some juice back
in the leure battery uh I run lithium
iron um uh for my for my internals
fridge and you know laptop and screen
and everything so yes the weather&amp;#39;s been
horrendous um anyway and welcome bonono
to Kiara good morning to you and sashan
good morning sud sashan B I&amp;#39;m guessing
that&amp;#39;s the same Sudan B who has been uh
very active in this month&amp;#39;s developer
challenge remind me in a second to uh
talk a little bit more about that well
done sashan and welcome and Welcome to
our good friend Matias lempa in Dortmund
and
good morning Rafael to you in um in
Poland and uh so Javier says here is 26
de but feels like 30 here is I think um
probably 15Â° but feels like 12 uh so
yeah welcome to my uh to my life at the
moment yep that&amp;#39;s me said say sashan
Antonio good morning to you in Madrid
thank you for everybody for joining so
uh yeah let&amp;#39;s get started I got my
coffee uh I don&amp;#39;t I don&amp;#39;t know about the
time but
you know I&amp;#39;m up I&amp;#39;m an early riser so
I&amp;#39;m up usually around 5:00 a.m. and uh I
didn&amp;#39;t go for run this morning for
reasons uh but so I was messing about
and you know getting things ready and
tidying things up and and I I hope to I
tried to get everything ready by 7:30 in
the morning you know half an hour before
we go live um and this time I did
remember to put the microphone to move
the the Blue Yeti microphone over let me
just move there uh there it is there um
last week uh I&amp;#39;d forgot to move the
microphone the boom arm over and the
sound wasn&amp;#39;t as good anyway and all of a
sudden I was making the cof like oh my
goodness me it&amp;#39;s you know it&amp;#39;s 8:57 what
come on DJ what so anyway Victor good
morning to you good good morning no good
not good morning at all good evening to
you in Mexico and welcome Umar Chella hi
good DJ good morning good morning to you
and yav good morning to you amazing
thank you all so much for joining I got
have one schug of
coffee and uh yeah switch to the uh the
main scene there we go um might as well
uh we I&amp;#39;ve got I posted have I posted um
have I posted did I put it in the chat
no I don&amp;#39;t think I did let me put that
link there uh put in the chat bang so
that is where of course as many of you
regulars know that&amp;#39;s where we share I
share all the links that we look at
links to resources that we look at
during this um session so I&amp;#39;ll update
this if there&amp;#39;s any more to share but at
the moment I thought I&amp;#39;ll put the SCP
developer news in there so that&amp;#39;s like
so one of the features the main feature
of the SCP developer news this week is
that uh Tom uh aided and maybe abetted
by um cassimir the cat the kitten cim
the kitten uh is telling us all about
sap Tech head the sap Tech virtual and
the sort of the follow on events as well
and also the way that this year Dev
toober Fest wraps around two weeks
before teched two week uh then teched
virtual week and then um two weeks after
wraps around the tech virtual event so
uh that&amp;#39;s all about that so there&amp;#39;s sap
so the latest task how many I can see
some folks in here recognize obviously
I&amp;#39;ve mentioned Sudan uh that are aware
of and are participating in the uh this
month&amp;#39;s sap uh developer challenge the
latest task the fourth task task number
three obviously um is out came out
yesterday you know it&amp;#39;s a fairly easy
one um and so if you if you have not had
a look at this already I would strongly
encourage you to do so uh because I
think it&amp;#39;s a little bit fun see in fact
I&amp;#39;m GNA sashan put in the chat what your
thoughts are on and I&amp;#39;m not saying
please say nice things I&amp;#39;m not asking
you to say nice things I&amp;#39;m just asking
you to say what your thoughts are do you
like it what uh what&amp;#39;s interesting about
it why people should do the uh challenge
please sashan put something in the chat
good morning Nasim to you in India
amazing so that&amp;#39;s that there&amp;#39;s a link
there as well There&amp;#39;s the link there um
latest task and everything by the way
another thing came out um where is a
link here the uh we&amp;#39;re doing these
YouTube shorts uh sort of you know to
consume on your mobile phone um and we
we pushed out one on Wednesday two days
ago all about the reppel because we on
the on the live stream here we know
about the reppel we&amp;#39;ve you know taking
our first foot
footsteps
um uh in the repple and everything we
might even be using it today who knows
who knows so check the playlist out uh
the latest one is this one that came out
um Wednesday like I say and finally what
was the last thing oh no um we&amp;#39;re going
to be looking at we I think we looked at
this last week or week
before this is probably this um this
querying in JavaScript is probably what
we&amp;#39;re going to want to refer to if we do
need to refer to anything during the
course of this live stream because this
is all about um constructing and making
queries that&amp;#39;s of course you know select
insert update upsert delete
Etc um not in not directly in cql
remember remember not directly in
um uh cor query language or CDs query
language but
in the sort of the mini the sort of the
the micro language the within node.js
within JavaScript so this is using cdsq
right cdql take look on constructing
queries right we&amp;#39;ve been doing that
select do from do columns do where do
whatever okay so that&amp;#39;s a reference to
that there so let&amp;#39;s get on with it um
also also uh before I say let&amp;#39;s get on
with it and then digress again
um put in the chat as well whether you
because Andrew Barnard um who is also a
a good friend of this channel uh and
good friend of this uh this show hands
onb Dev show um said in the uh oh yeah
let me let me show you let me go to the
thing here um latest task I can get to
the lat go to the latest task URL here
which is a discussion thread on the
community platform but then also there&amp;#39;s
always at the top of the task is a link
to the main challenge blog post uh which
describes all you know the whole thing
and then I said at the bottom here um
something like oh DJ you write a lot of
rubbish don&amp;#39;t you
um um let me know in the comments if
you&amp;#39;d like to see the request test
script and Andrew at the bottom said uh
yes I would like to see your request
test script in the blog post so maybe we
should look at that here because it
might be easier to show you here first
of all let me know if you want to see
the request testing which is the
mechanism I use uh let&amp;#39;s open another
and go to the um 20
2407 uh there we go there and in here we
in in the no I&amp;#39;m doing the sample thing
I&amp;#39;ve got this request test mechanism
okay
um uh testing test no uh CD sample this
I&amp;#39;m playing along with you for example I
can say testing remote request test and
I can do all sorts of test right okay
anyway if you want to see that let me
know um right so let&amp;#39;s just check
everything&amp;#39;s okay yes everything seems
to be okay amazing so let&amp;#39;s start um
where did we leave off last
week um R good morning to you good
morning to you in Frankfurt if I
remember correctly welcome to you in
Frankfurt hope the weather&amp;#39;s better over
there than it is here um I wonder if
zahid is on today and how what the
weather is like in suly Hull sh shanka
good morning good morning to you and a
nice uh picture of Sunrise there good
afternoon AJ yes in Frankfurt no weather
no weather is bad okay at least you know
at least we
you know okay that&amp;#39;s good it doesn&amp;#39;t
make me jealous then fantastic AJ good
morning my my lovely friend and
colleague AJ in India okay where we left
left off last
week I&amp;#39;m looking at my watch I always
check the time with my watch here and I
put it under my screen but it&amp;#39;s quite
dark under there I can&amp;#39;t see the bit
there so I can see it there we go it&amp;#39;s
just in the bit of light there 810 there
we go 810 can you make video on media
file
handling um uh
are you talking about the attachment for
example maybe in the future I mean at
the moment we&amp;#39;re trying to I&amp;#39;m trying to
push through the the Back to Basics this
all sorts of um ideas that we could uh
cover uh in cap but it&amp;#39;s probably going
to be realistically speaking it&amp;#39;s
probably going to be next year now that
we
do uh you know point point coverage of
specific things because you&amp;#39;ve got a lot
of other things a lot of other cool
things planned for you eador Freddy good
morning to you in oh my goodness me this
by the way did you do you know uh anyway
I&amp;#39;m going to digress even more so
welcome Freddy welcome friend do you
know did you know right so let me just
uh collapse that uh sorry change there
we go
fine right so um we&amp;#39;ve got this whole
idea here that where we we start here
and then say um list
listening oh yes what I one thing I did
do I think
offline is I use here which curl Jason I
use a little mechanism
here Jason um to basically invoke curl
with all the parameters and you know it
puts silent on because you know I like
it nice and quiet and then invokes JQ to
pretty print it okay so um I I thought
I&amp;#39;d bring that in here as well I&amp;#39;m not
sure whether I&amp;#39;ve saved it into the uh
into the uh uh container definition into
the dock uh container image definition
but basically I&amp;#39;ve got C if I say curl
um and then Local Host 404 o data V4
Book
Shop books for example I get that but if
I say curl Jason I get that okay so what
I what I you know where is that which C
Jason oh yeah I put it in my big
directory maybe I should move let me
know if you want this in the uh in the
docker container as well maybe I should
put that in there um so sashan says oh
thank you for commenting yes attachment
says nazim okay yes um I mean um I was
thinking of getting some people on to
talk about their own uh plugins that
they&amp;#39;ve written and everything so maybe
we can include that in that anyway
sashan says honestly this is the first
time I&amp;#39;m participating in the dev
Challenge and all credit goes to this
back to basic series here the hints in
the task description are quite helpful
thank you sashan thank you very much yes
so if if You&amp;#39; not uh if you&amp;#39;re not
participating in the dev challenges
particularly this one this month for
example uh get going what are you
waiting for um so let&amp;#39;s move that up
there so what we&amp;#39;ll do uh is we&amp;#39;ll say
list uh C uh list listening and send
that into ENT I should really sort of
alas this shouldn&amp;#39;t I as well enter c
um uh curl
Jason local poost 40004 o data V4 books
oh yeah no
Bookshop books now we started looking
at uh an individual book to get the
stock value so let&amp;#39;s start where we left
off last week which was let&amp;#39;s just bring
up uh for example here
404 let&amp;#39;s look at the books and just
grab um there we go the player of games
the ID the guid of um let&amp;#39;s get rid of
that get rid of all the stuff we don&amp;#39;t
want here do like challenge fine okay
there and put the ID in now we can
either put it in Brackets there like
that uh let&amp;#39;s do that for example or of
course we can use the the alternative uh
way of expressing that which is just to
sort of have it as part of the path okay
we can do that
right but what we want to do really is
say stock value remember stock
value is if we look at here um what&amp;#39;s it
called um main
CDs we Define stock
value as a bound function not as an
Unbound function not like total stock
but as a bound function therefore it
goes into this actions Clause that&amp;#39;s
stuck on the end of the books in this
case entity definition here in this in
this in the
service okay so let&amp;#39;s just run that now
let&amp;#39;s go back to here and run that and
at the
moment um we get 42 because of course
you know we ended on a high or on a low
we ended on life the universe and
everything the answer to um with saying
let&amp;#39;s just do the simplest thing that
could possibly work okay 42
now we also had a look ah yeah this is
where we want to look at the oh
something else actually param stock ID
um actions functions let&amp;#39;s go to cap
let&amp;#39;s go to capire um
actions uh implementing actions and
functions and what we saw somewhere
there we go there we go we saw this last
this do on get stock F blah blah blah we
copied that didn&amp;#39;t we we copied that
here so we have a reference and that&amp;#39;s
right yes it&amp;#39;s all coming back to me
like a bad
dream we said we go and make sure
everybody under everybody
understood what is going on here in this
destructuring so we&amp;#39;ll do that first but
to understand where this destructuring
comes in and why we need well we don&amp;#39;t
need the destruction we can do it a
different
way but let&amp;#39;s let&amp;#39;s let&amp;#39;s make sure we
understand what&amp;#39;s in the documentation
so when we read the documentation we
don&amp;#39;t think oh my goodness me what&amp;#39;s
that mean what even
mean um
and yes I tell you what we&amp;#39;ll do tell
you what we&amp;#39;ll
do we
know let&amp;#39;s just do the equivalent do the
equivalent but in a code block that we
have to use the return for example and
then there oh by the way oh ah missing
what hello what ah oh yes missing a
close bracket before I press Save By the
way before I press save you see it&amp;#39;s
still unsaved and therefore the cap
server is not restarted notice are you
thinking why is the date here so I can
just keep an eye on when the request was
made okay just to prove to myself that
yeah this is this is a request that&amp;#39;s
just happened now cuz it&amp;#39;s 8 816 817 now
this is UTC time so it&amp;#39;s 7:17 now so if
I press save I know that the cap Ser
will restart and something will happen
it&amp;#39;s restarting nice and slowly there we
go perfect because I&amp;#39;m running
containers and blah blah blah and all
sorts of things but now I can look at
this and think ah yeah that is that is
literally now you know a a new call
right that&amp;#39;s that&amp;#39;s the reason I got the
day there
um so I&amp;#39;ve just included it in a block
here so that we can find out
what this is all about because given now
we got this on a separate line we got
break point there and we&amp;#39;ve used um
debugging before haven&amp;#39;t we so i s I
suggest let me know in the comments if
you think this is a good idea I suggest
we get a feel for what comes in in the
request when we make a call to a bound
function not an Unbound fun function but
a bound function and therefore let me
just um just kill up for a second there
we go therefore because what we going to
need to do is figure out all right to
what book entity is this stock value
function bound yeah and obviously the
answer is this one with this guid right
so let&amp;#39;s let&amp;#39;s go slowly and figure out
how we get there so what we&amp;#39;ll do is
we&amp;#39;ll stop the cap server
we&amp;#39;ll start the
debugger is that small that&amp;#39;s a bit
small isn&amp;#39;t it there we go that&amp;#39;s a bit
better isn&amp;#39;t
it um start the debugger and immediately
we we hit this particular return 42
because of course while we&amp;#39;ve stopped
the the cap server we&amp;#39;re still running
this listen this still running this
listening which was going to reinvoke
the curl command so the Cur command has
gone and done the call to the stock
value use bound function on that
particular book which is which one is it
the player of games I think uh yeah the
player of games 3B
1e okay now where&amp;#39;s the Deb
console what we can see here is that the
request basically what we&amp;#39;ll find out is
the request holds everything that we
need I&amp;#39;m just going to go to there make
sure everything&amp;#39;s okay yeah everything&amp;#39;s
okay the the request um this is the this
is a disadvantage of having only one
main
screen um I would normally have my sort
of what&amp;#39;s it
called streamlabs and YouTube live
streaming thing uh on a separate monitor
but I&amp;#39;m got a separate monitor go so the
subscriber good morning Adam my name is
not Adam my name is DJ or qro um I&amp;#39;m
getting ready for the associate
certification cap backend developer yes
good work the
subscriber um so oh yeah so what we can
do is hover over that in the debugger
inv vs code very nice and see lots of
things here but sometimes you know the
sort of hover thing goes away so I can
use this and say right click add to
watch and then we can see it here about
one
bigger now just going back here and
putting putting this in our
brain this on get stock Fu we understand
that this is the actual event right this
is our un the our bound function name
this is The Entity to which this called
event is bound Fu or in our case of
course
um books okay so we got the stock value
bound to
books then we got this thing here params
where does pams come in well if we have
a
look inside of the request the incoming
request which of course as we know from
having looked at this before in on
handlers the first argument that&amp;#39;s
passed is the request is the incoming
request so we&amp;#39;ve captured that argument
in this parameter called Rec which is
you know convention request is req and
response is Rees right convention
wise so if we have a look inside of
what&amp;#39;s inside of what&amp;#39;s in inside
request we see all these underscore
things now I&amp;#39;ll skip over these
underscore all these all these
properties let&amp;#39;s call them properties
for now
whatever what is the key thing to
remember about anything that begins with
an underscore in cap and in many other
libraries and Frameworks as well put in
the
chat what the underscore here
signifies but if we while we while
you&amp;#39;re putting that in the chat if we
scroll down here we see all sorts of
things so we can see for example query
we can look at that we can you know
Target let&amp;#39;s look at Target rec. Target
okay so we get Bookshop books Bookshop
books is the target there&amp;#39;s the there&amp;#39;s
the sort of the name space the service
name underscore books Rec do what was
the other one we we&amp;#39;re looking at query
query rec. query okay anyway all sorts
of different things chakia says uh in I
think in response to what does the
underscore signify custom
parameter not that wasn&amp;#39;t the answer I
was thinking of somebody else put in the
chat what the underscoring these things
here here signifies to us as developers
to us as users of the
framework remember here the context is
that we&amp;#39;re looking into
the behind the curtain at cap into the
bowels of cap to understand what&amp;#39;s going
on but now while we while while somebody
else puts on or maybe chaki puts a
different answer there let&amp;#39;s have a look
at pams rick.
params check it out now let me make that
one bigger as well because you know we
can do that what do we see here rec.
params is an array of
one value if we expand that we can just
basically see a little bit more about
that array object
right but we can see that this is an
array of values and this value 3 b1e is
exactly what we&amp;#39;re looking for so that
is where we get
where is it that is where we
get the guey the ID of the particular
entity to which this particular instance
of the stock value function is being is
called right so we can say rec.
prams and then go for the first one
right uh first one as in the zeroth one
and that is what we need in order to go
and look that up to go and do a select
with um not providing services with
let&amp;#39;s go let&amp;#39;s go from here so we know
where I&amp;#39;m going from here um
with I hear echoing here is it echoing
with the select okay where in the where
Clause right so we&amp;#39;ll do that
shortly okay so nobody&amp;#39;s put in the chat
what they think it means uh by the way
you know don&amp;#39;t don&amp;#39;t worry about
thinking you might get it wrong or
anything I was going to say there&amp;#39;s no
wrong answers but you know we learn by
asking question questions and and
providing answers to other questions oh
rrick says thank you r underscore equals
nameing convention for members of ah
members of JS object
um it&amp;#39;s a
convention but it&amp;#39;s not again what I&amp;#39;m
looking for what I&amp;#39;m looking for the
answer is that these anything beginning
with let me just collapse that one and
collapse that one see see a bit more
anything beginning with underscore is
What&amp;#39;s the phrase I&amp;#39;m looking for uh now
I&amp;#39;ve said this What&amp;#39;s the phrase I&amp;#39;m
looking for is sort of
we shouldn&amp;#39;t use them they&amp;#39;re private
okay we shouldn&amp;#39;t rely on it these are
sort of inner workings of the mechanism
that we&amp;#39;re looking at okay so it&amp;#39;s not
public it&amp;#39;s private it&amp;#39;s just a
convention so if we started writing
writing a Handler for example that
relied upon something in wreck that was
something
underscore we should think again because
that might change that&amp;#39;s basically
signifying this is part of the inner
workings of the thing that you&amp;#39;re using
so do not rely on this because it may
change in the future okay you can see
the pams there look there are the prams
that&amp;#39;s that&amp;#39;s what we&amp;#39;re looking for and
you know you might think oh yeah there
it is I&amp;#39;m just going to go straight to
recore Pam there oh yeah bang got it but
no don&amp;#39;t do
that because you
may uh get tripped up in the next
release of cap because they may have
changed that internally that
means don&amp;#39;t use it right does that make
sense anyway okay so and we&amp;#39;ve got you
know we&amp;#39;ve got the prams down here right
perfect notice can anybody tell me this
is this is a very obscure
thing notice that we can see here in the
the difference between this one here it
says oh yeah it&amp;#39;s basically I mean this
I guess this is this is sort of VSS code
or a
short um maybe it&amp;#39;s a node reppel thing
you know a short way of describing it&amp;#39;s
an array with one element in it and
there it is right whereas this params
here what&amp;#39;s the I mean click to expand
oh there we go look at that I click to
expand who knew okay um it says here
it&amp;#39;s an array however did you also see
it&amp;#39;s not really an array cuz ah ah that
I think that that evaluated the params
if we go back again
let&amp;#39;s let&amp;#39;s put that do that again
interesting interesting add to
watch re there&amp;#39;s pams our
array but here
pams that really should say
evaluate click to evaluate because it
sort of does something that&amp;#39;s a function
look it&amp;#39;s a function and there it
is right this uncore param equals this
blah blah blah let&amp;#39;s move that look at
that woohoo and what this really anyway
yeah can anybody tell tell me why we can
get the value we can evaluate params
rec.
params without because it&amp;#39;s a function
look it&amp;#39;s a
function but why we don&amp;#39;t have to do
that and why actually doing that doesn&amp;#39;t
work put in the chat what you think the
reason for that might
be and also remind me in a in a short
while to come back to that if if people
have answered or not answered if folks
have answer right so why are we talking
about this ah chakia is on it like a car
onon it J exactly so params is a
getter mdn getter Setter I think we
talked about this before haven&amp;#39;t we get
JavaScript a getter def defers the cost
of calcula where is it is
it a getter defers the cost of
calculating the value until the value is
needed okay if you if you never need it
you never pay the cost basically you can
have a there a simple
example there you can have an object
with a property you know there&amp;#39;s there&amp;#39;s
a property called log with an array as
the value of that property you can also
have something called
latest which appears to the outside
world as if it&amp;#39;s just a normal property
so we can grab it like that
but actually it&amp;#39;s a
function okay and so when that
latest property is requested when you
know it&amp;#39;s the evaluation is
requested then the function runs okay
that&amp;#39;s a really cool way of being able
to refer to other values in that in in
the in that instance of that object okay
I actually actually use that in one of
the testers
in um in our developer challenge in fact
digress digress ooop digression alert
anyway ah tester tester in in the tasks
where was it in oh there we go in hello
in fact last the Tuesday&amp;#39;s
task I&amp;#39;m using a
geta to grab stuff
from here name cacro but actually in the
init function I set the on anyway DJ
stop digressing anyway so we now know
rec. prams is an array and we want that
one
okay that&amp;#39;s why we have this thing here
so let&amp;#39;s let&amp;#39;s bring up let&amp;#39;s node if we
say Rec equals and let&amp;#39;s just have
fruit banana and then also we&amp;#39;ll have
prams and it&amp;#39;s an array 1 two 3
right if we know that we want that thing
there
the second item in an array in the array
which is the value of the
params of the incoming re we can
say uh
prams um Let&amp;#39;s ignore the first thing
right oh tell you what let&amp;#39;s have the
first one uh first second third right
let&amp;#39;s do that equals
W now first is one second second is two
and third is
three okay similarly and this is this is
something that um if I wanted the second
one i&amp;#39; probably do right so I&amp;#39;d say here
um if I just wanted the second one not
interested in anything else I could say
here and we I think we talked about this
before like underscore ah this is
another another
Convention of using an underscore in
completely different context an
underscore here means there is there is
a value here but I don&amp;#39;t care what it is
okay so I&amp;#39;m just going to assign it to
you know a legitimate but stupid
um variable name called
underscore so now second is two notice
here this is this is a node J I think
they&amp;#39;ve seen this before this is a
nodejs reppel thing because in the
reppel normally if we say no JS and say
a equals 1 and then I put underscore
underscore is the I think again this is
not specific to this digression over
digression overr this is not specific to
the no JS reppel this I think is quite
common in reppel underscore is a
convention again why is underscore so
conventional is a convention again to to
to return the evaluation the previous
the the the latest the most recent the
most recent value so if I say hello
that&amp;#39;s the most recent value right the
most recently valuated thing anyway how
I confuse the heck out of everybody now
um so ah yeah there you go so if we do
this wre here uh Rec so if we wanted and
this is like this is almost like an
incoming um an incoming request so we
could say
prams ID right if and that will give us
uh oh sorry equals W there that will
give give
us in ID that first thing there and that
is the equivalent of what we&amp;#39;re doing
here uh what here there prams ID the
first one to get the first one in this
thing
here okay right so let&amp;#39;s get rid of that
uh let&amp;#39;s kill that debug let&amp;#39;s get rid
of that let&amp;#39;s go back here don&amp;#39;t need
that go back smaller again uh slightly
bigger there we go perfect
so with that we know that we can get the
guid to do a select right and what are
we trying to do stock value right so in
fact in fact in fact in fact yeah let&amp;#39;s
open
up on the terminal let&amp;#39;s get rid of that
break point as well uh let&amp;#39;s go there
and say CDs
reppel let&amp;#39;s make
that a little bit uh smaller there and
um say
CDs test
oops which will actually I should have
awaited that um which will start the
server up it&amp;#39;ll run on random Port as
we&amp;#39;ve seen already let&amp;#39;s get rid not
confused us let&amp;#39;s get rid of that for
now and now we can say
select yeah in fact um const books
remember this books equals cds.
entities
books and if we look at books we can see
that there&amp;#39;s a definition remember that
this is the definition from the schema
level not from the service level because
if the service level
definition uh CDs entities and then give
it the name space as it were Bookshop we
get something slightly different I think
books we should be able to tell the
difference if this there we go yeah in
fact let me just make it a bit smaller
just for a second you can see there&amp;#39;s a
difference between the schema level
definition of the books entity and the
service level ENT as in there level uh
books definition entity we can see it&amp;#39;s
a projection that&amp;#39;s the projection from
the service definition entity books as
projection on right
Etc okay oh oh how lovely is that we
also see not only it at the service
level of the books entity definition we
not only see that it&amp;#39;s a projection but
we also see the action the bound
function sorry the bound function there
it is amazing
never noticed that before it&amp;#39;s quite
cool okay so
now we can now say select from books
okay oh yeah we need to await that of
course
await but now we know we can grab the
guid good day Andrew and how are you
welcome Andrew in fact I was just
talking about you um I thought we might
what time is it now 8:35 8:35 oh my God
have a quick look at the request test
that you were asking about um so yes
we&amp;#39;ll do that later on remind me in
about 10 minutes Andrew remind me in 10
minutes to look at the request test or
something uh so if we now uh say select
uh from books where and now this thing
here don&amp;#39;t need that uh where yeah we
can see wa look at that look we can do
that there&amp;#39;s all sorts of different
ways
of expressing a wear clause look at that
we could even say all right let&amp;#39;s do
this let&amp;#39;s do it let&amp;#39;s do one of these
let&amp;#39;s do this one as a string
right uh
where um and what&amp;#39;s the what&amp;#39;s the
um uh no not there uh books Let&amp;#39;s go to
schema it&amp;#39;s of course it&amp;#39;s yeah it&amp;#39;s ID
but I could even I could have even
looked at the DJ come on get with it I
could have looked at the yaml definition
but look look we can see that the books
has an aspect CU ID CU ID the aspect is
key ID so it&amp;#39;s ID I&amp;#39;m looking for right
so I could say
now let&amp;#39;s put that back up there where
ID
equals right in fact let&amp;#39;s put that in a
double quotes ID equals and then what&amp;#39;s
the where&amp;#39;s the um there okay ID equals
that I mean that&amp;#39;s sort of you know
amazing in
its basicness is that the right even
phrase there we can get that but what we
can also do is say and this is this is
something maybe this is slightly nicer
ID
equals uh well we don&amp;#39;t have an ID so
let&amp;#39;s let&amp;#39;s put that in there ID equals
that because we&amp;#39;re going to have that in
our function aren&amp;#39;t we once once we
actually start writing it so we can now
say what id
equals in um in these um in this string
expression thing I can&amp;#39;t remember what
the technical term for that is uh I ID
equals ID that seems a little bit neater
where ID equals
what uh ID mismatch have I done that
wrong what&amp;#39;s going on providing don&amp;#39;t
need that anymore uh ID equals ah no
that&amp;#39;s all right ID
equals what have I not done uh back tag
back tick back oh Maas is on it what
have I not done there uh backed I&amp;#39;ve got
the practics I thought I the where ID
equals let&amp;#39;s just put that in there for
a second like that okay and now have I
got id id yeah it&amp;#39;s there so let&amp;#39;s try
that again what did I do before uh ID
equals
ID that&amp;#39;s
interesting Echo no not Echo what&amp;#39;s it
called
console.log ID equals
ID let&amp;#39;s
just ah ah of course of
course um of course that&amp;#39;s interesting
what I&amp;#39;m missing is of course because
we&amp;#39;re still constructing a query string
so what I need there is to put the
evaluation of the ID variable through
through this expression thing here in
the quotes there we go did that was that
in the example
oh oh you know what you know what I
think there&amp;#39;s a bug in the
documentation maybe or maybe it&amp;#39;s just
me let&amp;#39;s just try that ID let&amp;#39;s just
paste that
in there let&amp;#39;s do that let&amp;#39;s do that A8
select. from
books where I I&amp;#39;m going to do this
because I just love doing it because
it&amp;#39;s just so so crazy good right with
spaces where um let&amp;#39;s put that in in the
back tick there right
uh and of course that&amp;#39;s not going to
work because we don&amp;#39;t have W data ID so
we say um wre equals
data
uh
ID uh my goodness me this is digressing
so crazily but it&amp;#39;s all right I think
we&amp;#39;re learning we&amp;#39;re all learning
together here aren&amp;#39;t we uh there um
that&amp;#39;s see so rec. dat do ah damn uh ID
we got that so we can do that now now
can&amp;#39;t we but is this going to work is
this going to work
uh so I will um I will I&amp;#39;ll send a
modification to that in fact yes I&amp;#39;ll
send a modification to that now well not
now but after the live stream so that
should have single quotes or some quotes
around that thing shouldn&amp;#39;t
it
amazing so oh hello Nim how do you use
an external terminal not the one in vs
code I&amp;#39;m using Windows but haven&amp;#39;t been
able to do that when you say an external
terminal external to what Nim let me
know what you mean I mean in vs code of
course you get uh the ability to sort of
open a local you know what I&amp;#39;m doing
here you know a terminal local to the to
the machine now I can&amp;#39;t comment on your
situation because I don&amp;#39;t use I don&amp;#39;t
work on Windows um but I&amp;#39;m pretty sure
vs code will offer different uh terminal
uh contexts for example the command
prompt or Powershell if you&amp;#39;re that way
inclined and it depending on whether
you&amp;#39;re running with sigwin there or
maybe Windows uh subsystem for Linux WL
uh you get different types of terminals
available to according to the Linux
subsystem that you&amp;#39;re using there I
don&amp;#39;t know um but basically I&amp;#39;m on oh ah
so I&amp;#39;ve just seen um I&amp;#39;ve Just Seen
matias&amp;#39;s comment here uh use Dev
container so um so yes sorry thank you m
thank you Matias for keeping me on those
on the straight and narrow what I&amp;#39;m
doing here in vs code that&amp;#39;s running on
my machine here which is Mac OS you can
see there the little apple thing um but
I&amp;#39;m using cat uh in fact let me just
open up another terminal I&amp;#39;m using
uh a Linux terminal right because Linux
is you know the one true operating
system obviously uh for PCs and um
anyway but I&amp;#39;m using a Dev container so
if you watch episode one of this series
series you&amp;#39;ll find out how to set up the
dev container in fact uh cap B2B I&amp;#39;ll
put this in the uh put there because
we&amp;#39;re going to be referring to it I&amp;#39;ve
refer to it now how do I do this edit I
hate that pop uh there we go and there
uh first episode with Dev container
details um oh sorry no sorry not
um uh series GitHub
there there we go there Nim um you can
check you can check out that and that
will give you a proper shell you can do
you can use a bass shell right the one
true shell uh so I hope that helps um
additionally in part 11 you used yq and
I haven&amp;#39;t been able to use that either
well you need to install it you know um
I think I&amp;#39;m not sure have I got yq
installed here or not no I haven&amp;#39;t got
yet yq installed but I&amp;#39;ve used yq before
um let&amp;#39;s just open up another terminal I
use your yq a lot there&amp;#39;s yq so you just
install it you know to you for your
operating system Dev containers put it
in a de container that&amp;#39;s the best thing
uh so chakia says single quote I mikolai
good morning mikolai I think it might
work without function brackets ah yes
sorry thank you for bringing you back on
back on track Nikolai uh mikolai sorry
um uh so that&amp;#39;s that that&amp;#39;s that um
there&amp;#39;s a different way of I like this
right I like this query by expression I
think that by example sorry I think
that&amp;#39;s what that means qu bar example
yeah I guess so uh and text to speech or
I don&amp;#39;t even oh tag template string not
text to speech tag template string there
uh so uh we can also do this which is a
lot nicer I think so this is what I
trying to get to so we can now say here
I don&amp;#39;t like what vsq does that we can
also say here um we can have
ID as a sort of an object ID and then
rec. dat.
ID that works as well okay okay oh my
God uh in the docu there are no
brackets uh brackets where HP good
morning to you HP uh no brackets where
exactly in the dock put it in the put
where you mean in the dock thank you HP
fantastic um and welcome welcome
welcome uh so let&amp;#39;s do that right but
then what we want to do getting back to
remembering what we&amp;#39;re trying to do
which is stock value we&amp;#39;re saying stock
value is basically stock times price so
why don&amp;#39;t we add a clause here um
columns I can never remember um let&amp;#39;s do
this right I wonder if we can do this
await and then
dot no we can&amp;#39;t select ah wait a come on
DJ did
before object. Keys select we can see we
can do
that do from
uh dot where uh from
where oh no local anyway yeah
anyway select
where from books s columns yeah
columns stock price and I think we can
also put those in you know as in an
array I think uh I think we have to put
them in a rate do we stock
price uh
what we doing TJ come on come on I&amp;#39;m
just making things up I don&amp;#39;t know I&amp;#39;m
no idea what I&amp;#39;m doing there we go stock
price
okay but what we can also
do uh HP in the docu there on oh sorry
I&amp;#39;ve read that already in the do there
no brackets sorry
um we can also say I&amp;#39;m sure we could
should put in the string as well we did
that before
stock
price oh sorry right
uh this much expecting from
books I thought we could do it in uh
let&amp;#39;s go back to the column this thing
this thing for now stock price and then
how about stock times
price oh of course yeah I have to have
an alias as stock
value check it out uh I believe HP is
referring to no brackets after where in
the TTS example soan thank you for after
where in the TTS where ah yes it&amp;#39;s got
no brackets ah interesting oh yeah we we
should try that well done HP HP is he
got super sharp eyes you picked up
something last week as well it&amp;#39;s
brilliant so let&amp;#39;s let&amp;#39;s just try
that select where which one was it in
the uh in the tech let&amp;#39;s call it text to
speech from now on uh ID equals that uh
[Music]
there there there let&amp;#39;s try
that
that&amp;#39;s ah of course that is the string
how weird so that
works but that
doesn&amp;#39;t that is super
interesting why does can anybody tell me
why that that
works what&amp;#39;s going on there why that
works but why when you put it in
Brackets it doesn&amp;#39;t
work that&amp;#39;s interesting I&amp;#39;ll dig into
that and find out because my brain is
not working at the moment anyway let&amp;#39;s
try and get to the end of this thing
here why are we trying to do oh stop yes
there we go so if we now let&amp;#39;s just get
on back on the straight and narrow let&amp;#39;s
go back here and
say um oh wait
select
columns uh well we&amp;#39;ll just do one shall
we
columns um
stock times
price as
stock I use the same sort of camel case
type thing there um
from uh from books because we&amp;#39;ve got
books defined up here haven&amp;#39;t we there
books there from
books where and we&amp;#39;ll use that thing
there
ID uh what was the thing ID equals there
we go yeah ID
equals oh sorry yes where ID equals
uh and now what do we want to put in
there right what do we want to put in
there uh we want to add this thing here
prams
ID okay because don&amp;#39;t forget the request
is captured and destructured by this
expression now we understand hopefully
we understand what what&amp;#39;s going on there
prams id
id id and then why is it squiggly
underline because I think it&amp;#39;s going to
tell us about the uh unexpected token
uh oh I know I think um async there we
go it needs to be an async after a wait
if we&amp;#39;re going to use a weight it needs
to be an async function where ID where
we don&amp;#39;t need that square bracket there
from wa select columns from from books
where ID there we go um we don&amp;#39;t need
that either perfect and then we&amp;#39;ll say
here um well let
actually yeah return let&amp;#39;s just go for
it return
in fact wait result equals wait sorry
result const result
equals
that uh let&amp;#39;s let&amp;#39;s log it first loger
result and just return 42 for now right
let&amp;#39;s do
that see what
happens okay CDs watch and open up here
and we&amp;#39;ll do have I got that there there
we go try that
okay we get the 42 right and in a log of
result we get what do we get do we get
anything at all uh log result results
columns I can&amp;#39;t see any result get uh
logger results we got logger going there
what&amp;#39;s going on logger total stock total
stock why is that total stock like that
oh anyway
um
logger let&amp;#39;s just see we get we get that
oh there we go it&amp;#39;s working ah I hav I
haven&amp;#39;t saved it okay fine save that
okay fine fine fine stock value so we
can actually say
return
um sorry return
result. stock
value what what what return result.
stock value you is that right oh no ah
what&amp;#39;s the thing I&amp;#39;ve missed look check
it out brackets are our
friend we don&amp;#39;t get an object back from
this select we get an array so we want
re I we can do one of many things right
we can either say here result stock
value 150 or of course we can just say I
think we did this the other day
one and then of course it&amp;#39;s not already
so we&amp;#39;re going to have an error there
there save that we want one we want one
we want one uh
result
um stock
value what&amp;#39;s going on now come on DJ uh
un cannot read properties of undefined
from what one oh
ah see I broken my rule of new lines
this should be on a new line as well so
I can see where the first one is there
we go that&amp;#39;s
better 150 there we go okay Andrew
Andrew hello we want one but also you
didn&amp;#39;t I just remembered you didn&amp;#39;t
remind me about the request test so why
don&amp;#39;t we just it&amp;#39;s it&amp;#39;s just less than
seven minutes to
go we&amp;#39;ve got the stock value we&amp;#39;ve we&amp;#39;ve
implemented that um I think I egged it
on the um on the digressions and the
random things there but weld on HP for
pointing out that that works because
it&amp;#39;s there&amp;#39;s no brackets I don&amp;#39;t know
why it works because there no brackets
we&amp;#39;ll find out I was in a flow oh well I
was in a I was in something um right so
let&amp;#39;s just draw a line under that oh
look at that half eaten
mini what&amp;#39;s it called cinnamon thing
squashed as
well so last
[Music]
bit our tasks get rid of that get rid of
that get rid of that there we go so
um what we&amp;#39;ve got what I use for
testing in the context
of
the developer
challenge is this thing
called where is it let me go back to the
sample I&amp;#39;m I&amp;#39;m sort of running along
I&amp;#39;ve got a candidate here which is all
of the answers obviously ah sugar that
explains it it does sugar and
caffeine um but I&amp;#39;ve also got this
sample which is basically keeping up
with where you are on the tasks so at
the moment I&amp;#39;ve implemented these two
things right ping hello and Su a and
some and there&amp;#39;s the implementation
quite simple right now in here I&amp;#39;ve got
this testing remote I&amp;#39;ve also got a
local testing thing let me show you the
local testing thing for a second um the
local testing in the candida area is
where I use bats the sort of the bash
automated testing and I just use Curl
commands to do all the things so I can
um I can do that I can actually start
the start this
server oh that&amp;#39;s no let not even go
there let&amp;#39;s get rid of that get rid of
that and say here uh where are we sample
sample sample testing
remote I&amp;#39;ve got my request test so I can
set I can start the I can start a local
tester but we&amp;#39;ll also use the main we&amp;#39;ll
use the main tester right declare tester
service base tester service base
defaults
to here okay and then it&amp;#39;s going to
assume a local service running on 800 my
service okay so let&amp;#39;s do that first of
all so I&amp;#39;ll say here in my sample um
Port equals
8,000 CDs watch okay
and then put my head down the bottom
there um in fact let me just swap those
over there we go that&amp;#39;s better don&amp;#39;t see
to see that
um so now I can
say uh remote uh testing remote request
test and it give me example so I can say
here Q
macro my community ID and then the the
the path of the service end point so
it&amp;#39;s you know the base the default path
is
is Local Host 8000 right and then the
tester service okay so what&amp;#39;s going to
happen when I when I default the tester
service to where it is it&amp;#39;s not going to
be able to reach this Local H but it
doesn&amp;#39;t matter a basic ping we&amp;#39;re going
to get error calling service endpoint
because of
course um because of course am I logged
in still uh if I&amp;#39;m not logged in oh no
no 56 no
you&amp;#39;ll see that in fact no let&amp;#39;s do it
CF login see behind the
scenes CF logs
recent uh tester serve you&amp;#39;ll see
probably an error there we go there&amp;#39;s
the error that just happened then
um Local Host there basically Local Host
that&amp;#39;s me that was me saying oh can&amp;#39;t we
it because of course the tester service
in the cloud is trying to reach local
but it
can&amp;#39;t
so um I can um go back to here I could I
could of course use enrock to expose it
and everything but but yeah let&amp;#39;s do
that now enrock let&amp;#39;s do that there um
there
enro HTTP 8000 and now I can grab that
URL there
app and then I can say here um export
test candidate
server base equals that with two P&amp;#39;s and
now I can run that thing
again uh and er what uh candidate server
base and gr why did that not work
uh testing server
test error calling service endpoint did
I not candidate server base
Ang ah what what can I not get there oh
did I not do that
right fre
app server base should be all right
there end
point
interesting let&amp;#39;s try that again let&amp;#39;s
have a look at that uh
three let&amp;#39;s do that one more time
I don&amp;#39;t know what&amp;#39;s going on there uh
two basic ping right let&amp;#39;s
look
uh don&amp;#39;t you just love Jason in
logs DJ three
tier let&amp;#39;s just do a
basic oh you&amp;#39;re still using loc
clost um let&amp;#39;s look
for
app no that enrock thing okay so it is
something to do
with that there hold on
and
Echo candidate oh it&amp;#39;s not
even oh yeah candidate server
base uh request test let&amp;#39;s what else
I&amp;#39;ve missed here request test test a
service base that&amp;#39;s fine candidate
service service oh ah DJ you idiot it&amp;#39;s
not candidate server base it&amp;#39;s candidate
service based I can&amp;#39;t even use my own
programs
service
base now request test request
test uh run it run it run it run it work
yes okay I just got the envir variable
name wrong and now I can actually do
this right I can say testing remote go
and it will run all of the tests for me
pass pass pass and then obviously the
other ones will fail because I&amp;#39;m not
implemented yet null because we get
errors etc etc so there we go so I&amp;#39;ll
I&amp;#39;ll share that um I&amp;#39;ll share that
online on the blog post probably Andrew
and also did you note I&amp;#39;ll leave you
with one really cool
thing the way that cap calls makes calls
to uh for example uh function Imports in
a no data service is it uses these
positional parameters check it out
that&amp;#39;s all part of the OD spec it&amp;#39;s
beautiful right anyway with that
bombshell I&amp;#39;ll leave you and see you uh
next week next week might be the last
one before the summer break I&amp;#39;m not sure
number 20 but anyway have a great Friday
have a great weekend and see you next
week
bye e